## 问题定位
- 单图模式左右切换时，currentPhoto 更新导致图像直接替换，无过渡动画，视觉“跳变”明显。关键处在 SinglePhotoView 的图片呈现与导航逻辑：[SinglePhotoView.swift:L25-L66](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L25-L66)、[SinglePhotoView.swift:L117-L131](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L117-L131)、[SinglePhotoView.swift:L198-L207](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L198-L207)
- 图片加载与视图状态重置在 loadFullImage 中执行，切换时会重置缩放/位移，也会放大跳变感：[SinglePhotoView.swift:L173-L196](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L173-L196)

## 目标效果
- 左右切换时采用淡入淡出（cross‑fade），过渡时长约 200–300ms，使切换平滑。
- 在过渡期间保持容器尺寸和布局稳定，避免尺寸/缩放瞬时变化带来的跳感。
- 预加载相邻图片，进一步减少加载延迟造成的闪烁。

## 实施方案
- 淡入淡出过渡：
  - 在图片容器引入内容过渡：优先使用 `.contentTransition(.opacity)`（若部署目标支持）；并为图片视图绑定 `.id(photo.id)` 以确保视图标识变化时触发过渡。
  - 同步将 `navigateNext/navigatePrevious` 和 `onChange(of: photo.id)` 的赋值包裹在 `withAnimation(.easeInOut(duration: 0.25))` 中，统一动画时间线。[SinglePhotoView.swift:L117-L131](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L117-L131)
  - 兼容回退：如目标系统不支持 `contentTransition`，采用 ZStack 双图层方案：保留上一张图（previousImage）与当前图（currentImage），通过不透明度动画实现交叉淡入淡出，动画结束后清理上一张。
- 预加载相邻图片：
  - 在 `loadFullImage()` 完成后，异步预取相邻索引的原图/显示图：`ThumbnailService.getDisplayImage(for:maxPixelSize:)`，让切换命中缓存。[SinglePhotoView.swift:L173-L196](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L173-L196)、[ThumbnailService.swift:L20-L50](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Services/ThumbnailService.swift#L20-L50)
- 布局与状态稳定：
  - 保持外层容器与坐标系稳定，用 `.scaledToFit` 或固定约束，避免切换时因图像尺寸差异触发布局跳变。[SinglePhotoView.swift:L25-L66](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L25-L66)
  - 在淡入期间延迟缩放/位移重置：将重置动作在动画结束回调中执行，或对 `scale/offset` 使用同样时长的缓动动画，使状态变化也平滑。
- 交互一致性：
  - 键盘箭头与鼠标点击导航都走相同动画通路，保持一致的视觉体验。[SinglePhotoView.swift:L198-L207](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SinglePhotoView.swift#L198-L207)

## 代码改动点
- SinglePhotoView：图片容器添加过渡与标识、导航函数加入动画、在 `onChange(of: photo.id)` 中触发淡入；加入可选的 previousImage 状态与 ZStack 回退实现。
- 可选：在 `ThumbnailService` 或 SinglePhotoView 内部添加相邻图片预取调用（不改动缓存策略）。

## 验证方案
- 运行应用，进入单图模式，使用左右箭头快速切换：观察是否出现 250ms 的顺滑淡入淡出，是否无闪烁/卡顿。
- 切换不同分辨率/纵横比图片，确认过渡期间容器不抖动，缩放/位移重置平滑。
- 通过相邻预加载验证首次切换是否更快、内存占用是否稳定（依赖现有 NSCache 限制）。

## 兼容与风险
- 若部署目标不支持 `.contentTransition`，使用 ZStack 双图层不透明度动画作为兼容方案。
- 预加载仅触发缓存填充，不改变现有内存上限；如相册极大，可限制预加载并发数与最大像素。

## 交付内容
- 提交过渡动画与预加载实现的代码改动，确保所有切换入口统一走淡入淡出；不改变现有业务逻辑与数据结构。