## 布局与框架
- 继续沿用当前 HSplitView 三栏结构（已在 [ContentView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/ContentView.swift#L52-L155) 中使用），避免引入 NavigationSplitView 带来的样式差异。
- 左：树形文件夹导航（复用/增强 [FoldersTreeView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/FoldersTreeView.swift)）。
- 中：预览区（新增 FolderPreviewView）。
- 右：信息面板（沿用 [InfoPanelView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/InfoPanelView.swift)）。

## 数据模型与状态
- 选中状态：@State var selectedFolder: URL?；支持多选时以主选为预览源。
- 树数据：沿用 [FolderNode.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Models/FolderNode.swift) 的层级结构，按需懒加载 children，缓存展开状态。
- 过滤查询：在中间预览使用 SwiftData @Query，对 [Photo](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Models/Photo.swift) 以 selectedFolder 路径前缀过滤；可复用现有 filterFolder 逻辑（见 [ContentView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/ContentView.swift#L27-L50)）。

## 树形导航实现
- UI：OutlineGroup + Disclosure 样式，节点显示图标/名称/数量/路径（已在 [FoldersTreeView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/FoldersTreeView.swift#L12-L36)）。
- 交互：
  - 单击选择 → 更新 selectedFolder 并刷新预览。
  - 双击展开/折叠；上下文菜单：在 Finder 显示、从库移除（参考 [ImportView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/ImportView.swift#L351-L365)）。
  - 拖拽支持：文件夹拖入网格以创建相册或加入分组。
- 性能：目录节点 children 懒加载；文件计数异步计算并缓存。

## 右侧预览区设计（FolderPreviewView）
- 展示策略：
  - 图片/视频：复用缩略图与网格能力（参考 [PhotoGridView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/PhotoGridView.swift) 与 [ThumbnailService.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Services/ThumbnailService.swift)）。
  - 非媒体文件：Quick Look 预览（以 NSViewControllerRepresentable 包装 QLPreviewPanel/QLPreviewController）。
- 辅助 UI：面包屑（显示从根到选中目录的层级）、预览工具栏（排序、分组、缩略图大小、包含子文件夹开关）。
- 空态：无媒体时显示空态与引导操作（参考 [EmptyStateView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/EmptyStateView.swift)）。

## 交互与命令集成
- 模式切换：在根视图新增 viewMode.folderBrowser；选中文件夹时自动进入该模式或在侧栏提供入口（参考现有模式切换 [ContentView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/ContentView.swift#L23-L25)）。
- 菜单命令：沿用 NotificationCenter 的分发方案，在 App 层广播、各视图订阅（参考 [CullerApp.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/CullerApp.swift#L29-L82)）。
- 快捷键：添加展开/折叠、向上一级、聚焦树/预览的快捷键（复用 [KeyboardShortcutManager.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Services/KeyboardShortcutManager.swift)）。

## 性能与稳定性
- 懒加载 + 缓存：树节点 children 与计数缓存；缩略图走现有服务与本地缓存。
- 并发：文件系统扫描与计数放入后台队列，UI 使用 debounce 刷新。
- 兼容：对不可访问目录与损坏文件进行错误提示汇总（参考 [AppErrors.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/AppErrors.swift)）。

## 集成步骤
1. 在 ContentView 增加 folderBrowser 分支，布置三栏：左 FoldersTreeView、中 FolderPreviewView、右 InfoPanelView。
2. 将选中目录状态上提到 ContentView，并贯穿到树与预览。
3. 为 FolderPreviewView 添加媒体网格与 Quick Look 预览能力；接入排序/过滤/包含子目录开关。
4. 接入菜单命令与快捷键，完成模式切换与常用操作。
5. 验证：本地打开含多级目录的样例库，检查展开性能、预览正确性与空态。