## 目标与设计原则
- 简洁、层级清晰、信息按重要性递进显示
- 统一排版、控件大小与间距，减少视觉噪音
- 常用操作显性、不常用渐进披露（Progressive Disclosure）
- 交互一致：折叠状态记忆、清晰的反馈与空态

## 当前结构与问题概览
- 三栏布局基于 HSplitView：[ContentView.swift:L146-L151](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/ContentView.swift#L146-L151)，左栏 [SidebarView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SidebarView.swift)，右栏检查器 [InspectorView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/InspectorView.swift)
- 左栏混杂“库/文件夹/相册/模板/管理”，分组边界不清、入口散乱
- 右栏信息面板与筛选控件堆叠，密度高、对齐不一致、清空筛选不显性

## 信息架构调整（IA）
- 左侧边栏重组为三个一级分区：
  1) 库（全部、已选、已读等概览项）
  2) 文件夹（可展开的树，展示计数）
  3) 相册集合（智能相册/用户相册）
- 将“模板/管理相册与…”迁移到二级入口（右上角“⋯”菜单或工具栏），减少一级杂项
- 顶部固定“导入”主按钮，保持与工具栏一致；在左栏保留次级入口（可选）
- 每个分区支持搜索/过滤，仅影响该分区内容

## 交互模型与折叠逻辑
- 使用 DisclosureGroup/Section 管理分区，默认展开“库/文件夹”，折叠“相册集合”
- 记忆用户折叠状态（UserDefaults），切换目录时不重置
- 左栏项提供一致的辅助信息：计数 Badge、状态图标（仅必要）
- 右栏顶部采用分段控件或 TabView：信息 | 编辑/批注 | 筛选
  - 信息：沿用 InfoPanelView，按组折叠（设备、镜头、文件、拍摄参数）
  - 编辑/批注：将打标工具条迁移为该页的控件集合（评分、颜色、旗标）
  - 筛选：集中所有过滤器，提供显著“清空筛选”与“应用/重置”按钮
- 提供快捷键：显示/隐藏左右栏；切换检查器页签

## 视觉与排版规范
- 8pt 间距网格；标题 13pt（Medium），正文 12–13pt（Regular）
- 列表项高度统一（28–32pt），图标 16–18pt，文字左对齐
- 分区之间使用细分隔线/SectionHeader，弱化边框与阴影
- 颜色遵循系统语义色；Badge 使用浅底+深字，避免高纯度色块

## 组件化与代码改造路径
- 左栏：提取 SidebarSection 组件与统一样式
  - 改造入口：[SidebarView.swift:L22-L116](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/SidebarView.swift#L22-L116)，将列表重构为 VStack(Section)
  - 文件夹区使用 OutlineGroup/DisclosureGroup 展示树形，右对齐显示计数
- 右栏：InspectorView 拆分为三页
  - 容器改造入口：[InspectorView.swift:L16-L28](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/InspectorView.swift#L16-L28)
  - 信息页复用 [InfoPanelView.swift](file:///Users/bytedance/workspace/ai-demo/culler/Culler/Culler/Views/InfoPanelView.swift)
  - 打标控件独立为 MarkControlsView（评分/颜色/旗标），筛选控件独立为 FiltersView（RatingFilterView、ColorFilterView、FlagFilterView）
- 抽取样式常量为 Style.swift（间距、字体、图标尺寸、分隔线）
- 折叠状态与显示偏好存储在 AppPreferences（UserDefaults），通过 EnvironmentObject 注入

## 行为与状态管理
- 统一使用 ObservableObject 管理：
  - SidebarState：分区折叠、搜索、选中项
  - InspectorState：当前页签、过滤条件、信息面板折叠
- 过滤条件与网格联动：更改 FiltersView 即刻驱动中间内容刷新
- 清空筛选时，保留评分/颜色的“当前打标”但清除过滤器

## 可配置与本地化
- 所有分区标题与按钮文案走 Localizable.strings；Badge 计数格式统一
- 首次运行提供默认展开策略；用户可在设置中切换“右栏默认页签/左栏默认展开”

## 质量度量与验证
- 可用性：侧边栏主要任务点击步数减少 ≥30%
- 密度：右栏同时可见控件数量降低至 1–2 个分区
- 一致性：对齐误差 <1pt，控件尺寸统一
- 验证：
  - 截图前后对比（关键场景：导入、浏览、筛选）
  - 交互快照测试与状态持久化测试
  - 性能：侧栏渲染时间与 CPU 开销对比

## 实施步骤（迭代）
1. 建立 Style.swift 与统一 Section 组件（SidebarSection/InspectorSection）
2. 重构 SidebarView 为三分区，接入折叠与计数
3. InspectorView 拆分为“信息/编辑/筛选”，实现 FiltersView 与清空按钮
4. 打标控件迁移到右栏“编辑”页；底部工具条保留轻量快捷入口
5. 接入 AppPreferences（记忆折叠/页签）；添加快捷键
6. 本地化文案与空态/占位优化
7. 编写快照与状态持久化测试，跑 UI 验证并微调间距

## 交付物
- 统一的侧栏/检查器组件与样式文件
- 重构后的 SidebarView 与 InspectorView，可配置偏好与本地化
- 测试与基准截图，用于回归与评审